@using CarCareTracker.Helper
@inject IConfigHelper config
@inject ITranslationHelper translator
@model List<OdometerRecord>
@{
    var userConfig = config.GetUserConfig(User);
    var userLanguage = userConfig.UserLanguage;
}
<div id="odometerHistoryModalContainer" class="d-none">
    <div class="modal-header">
        <h5 class="modal-title">@translator.Translate(userLanguage, "Odometer History")</h5>
    </div>
    <div class="modal-body">
        @if (Model.Any())
        {
            <div class="row">
                <div class="col-12" style="max-height:50vh; overflow-y:auto;">
                    <table class="table table-hover">
                        <thead class="sticky-top">
                            <tr class="d-flex">
                                <th scope="col" class="col-3">@translator.Translate(userLanguage, "Date")</th>
                                <th scope="col" class="col-3">@translator.Translate(userLanguage, "Initial Odometer")</th>
                                <th scope="col" class="col-3">@translator.Translate(userLanguage, "Odometer")</th>
                                <th scope="col" class="col-3">@translator.Translate(userLanguage, "Distance")</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (OdometerRecord odometerHistory in Model)
                            {
                                <tr class="d-flex">
                                    <td class="col-3">@StaticHelper.TruncateStrings(odometerHistory.Date.ToShortDateString())</td>
                                    <td class="col-3">@odometerHistory.InitialMileage</td>
                                    <td class="col-3">@odometerHistory.Mileage</td>
                                    <td class="col-3">@(odometerHistory.DistanceTraveled == default ? "---" : odometerHistory.DistanceTraveled)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
        else
        {
            <div class="row">
                <div class="col-12">
                    <div class="text-center">
                        <h4>@translator.Translate(userLanguage, "No odometer history")</h4>
                    </div>
                </div>
            </div>
        }
    </div>
</div>